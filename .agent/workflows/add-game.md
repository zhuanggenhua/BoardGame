---
description: 添加新游戏到桌游平台的完整工作流程
---

---
description: 添加新游戏到桌游平台的完整工作流程
---

# 🎮 添加新游戏工作流

> [!IMPORTANT]
> **本工作流仅作为参考指南**，请根据具体游戏的复杂度和特点灵活调整：
> - **自适应原则**：简单游戏可简化处理，复杂游戏需按需扩展。
> - **非唯一性**：各阶段定义的结构仅为建议，并非硬性开发限制。
> - **迭代开发**：建议先走通核心逻辑平衡，再完善 UI 与教程系统。

本工作流定义了向桌游平台添加新游戏的标准化逻辑框架。

---

## 📋 Phase 0：需求分析与规划

### 0.1 核心定义
确认新游戏的核心属性：
- **基本信息**：中英文名称、ID、分类（策略/派对/抽象等）。
- **参与规则**：玩家人数范围、初始布局。
- **胜利版图**：明确的胜负判定条件。

### 0.2 复杂度自评估
根据具体游戏特点决定开发重心：
- **状态树深度**：是否涉及棋盘以外的资源（手牌、牌库、计分板）。
- **流程分支**：是简单的轮询回合，还是涉及多个不同性质的阶段（Phases）。
- **隐藏因素**：是否存在玩家间不可见的信息。
- **交互层级**：简单的网格点击还是复杂的物体拖拽。

---

## 🏗️ Phase 1：游戏逻辑层 (Game Engine)

### 1.1 模块化状态设计
- **核心状态**：设计能最小化表达游戏局面的数据结构。
- **悔棋兼容**：撤销由引擎系统自动注入 `G.sys`，无需手动实现 UndoAwareState。

### 1.2 动作原子化 (Moves)
- **合法性校验**：每个动作必须先经过严格的非法操作检查。
- **状态转换**：实现逻辑清晰的原子操作，并在必要时触发回合结束。

### 1.3 流程管控 (Turns & Phases)
- **阶段流转**：配置不同阶段下的活跃玩家及其可用动作。
- **特殊判定**：在每一步之后动态检查是否满足游戏结束或奖惩触发条件。

---

## 🎨 Phase 2：界面交互层 (UI/UX)

### 2.1 响应式布局规划
- **状态实时反馈**：清晰显示“当前轮到谁”、“当前所处阶段”。
- **动态渲染**：基于游戏状态数据驱动 UI 更新，避免过重的局部逻辑。

### 2.2 视觉与交互规范
- **操作暗示**：通过高亮或动效提示当前玩家可交互的元素。
- **反馈确认**：操作成功或失败后提供必要的视觉回馈。
- **组件集成**：按需引用悔棋控制台、调试面板等全局辅助组件。

---

## 📚 Phase 3：教学与引导系统 (Tutorial)

### 3.1 教学路径设计
- **最小化引导**：仅覆盖最核心的上手规则，避免冗长。
- **场景模拟**：利用 `aiMove` 模拟对手反应，让新手通过模拟实操学习。

### 3.2 步骤类型应用
- **上下文解说**：在关键时刻弹出定位气泡进行规则解释。
- **强交互点位**：要求用户执行特定动作才允许由下一步。
- **视觉焦点**：必要时使用暗色遮罩（Mask）引导用户关注特定区域。

---

## 🔗 Phase 4：全局集成与注册

### 4.1 大厅与配置注册
- **元数据录入**：在全局游戏清单中注册 ID、标题、分类及对应的缩略图。
- **参数调优**：设置游戏是否可见、支持的游戏模式等。

### 4.2 路由与客户端挂载
- **动态实例**：确保系统能根据页面参数拉起正确的游戏逻辑实例与 UI。
- **跨模块映射**：关联游戏逻辑、UI 面板以及对应的教程脚本。

---

## ✅ Phase 5：全量验证流程

### 5.1 逻辑完整性验证
- **全流程覆盖**：至少完成一次从开局到结算的完整自动化或手动闭环。
- **胜负边界**：测试平局、绝杀、掉线重连等边缘情况。
- **悔棋闭环**：验证在多个操作步骤后，悔棋能百分之百恢复到预期状态。

### 5.2 教学流程验证
- **死锁检查**：确保每一步都有明确的操作指引且不会卡死。
- **资源匹配**：验证所有引导 ID 与实际 DOM 标识匹配。

---

## 📝 开发检查清单 (自适应版)

- [ ] **逻辑面**：核心规则是否已通过单元测试或模拟对局？
- [ ] **交互面**：在移动端或不同分辨率下是否能正常操作？
- [ ] **悔棋面**：复杂操作后历史记录是否依然准确？
- [ ] **引导面**：新用户第一次玩是否不需要查阅外部手册？
- [ ] **性能面**：状态更新时是否造成不必要的重渲染？

---

*工作流版本：v2.5 (Abstract & Adaptive) | 最后更新：2026-01-20*