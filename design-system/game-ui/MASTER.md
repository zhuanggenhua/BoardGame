# 游戏 UI 交互规范 (Game UI Interaction Principles)

> **核心理念**：游戏感 = 即时反馈 + 状态清晰 + 操作愉悦
> 
> 本规范定义**交互原则**，不限定具体颜色/风格。视觉风格见 `design-system/styles/`。

---

## 1. 交互反馈原则

### 1.1 即时反馈 (Immediate Feedback)

**所有可交互元素必须有反馈**，让玩家知道"我的操作被接收了"。

| 交互类型 | 必须反馈 | 可选增强 |
|----------|----------|----------|
| Hover | 视觉变化（亮度/颜色/边框） | 轻微位移、光晕 |
| Press/Tap | 缩放或位移 | 音效、涟漪 |
| 禁用点击 | 无反馈 + 视觉暗淡 | 抖动提示"不可用" |
| 长按 | 进度指示 | 震动反馈 |

**反馈时机**：
- Hover/Press 反馈必须 < 100ms（感知即时）
- 状态切换动画 150-300ms（感知流畅）
- 复杂动画 300-500ms（感知完整）

### 1.2 状态清晰 (State Clarity)

玩家必须能**一眼区分**元素的当前状态：

| 状态 | 视觉特征 | 实现方式 |
|------|----------|----------|
| 可交互 | 明显可点击 | cursor-pointer + 视觉提示 |
| 悬停中 | 高亮/突出 | 亮度提升、边框、阴影 |
| 按下中 | 下沉/收缩 | scale 或 translate |
| 选中/激活 | 持续高亮 | 颜色变化、边框、图标 |
| 禁用 | 明显不可用 | 降低透明度、灰度、去除阴影 |
| 加载中 | 进行中提示 | spinner、骨架屏、进度条 |

### 1.3 操作愉悦 (Satisfying Interaction)

**游戏感的核心**：让玩家觉得"点这个按钮很爽"。

实现手段（按效果排序）：
1. **物理感**：按钮有"厚度"，点击有"下沉"
2. **音效配合**：点击、拖拽、放置有声音
3. **动效强化**：成功操作有庆祝动画
4. **触觉反馈**：移动端震动（可选）

---

## 2. 动画规范

### 2.1 时长标准

| 场景 | 时长 | 缓动函数 |
|------|------|----------|
| 微交互（hover/press） | 100-200ms | ease-out |
| 状态切换 | 200-300ms | ease-in-out |
| 元素进入/退出 | 300-400ms | ease-out |
| 复杂动画（翻牌/掷骰） | 400-800ms | spring/bounce |
| 全屏转场 | 300-500ms | ease-in-out |

### 2.2 性能规则

**必须遵守**：
- 只动画 `transform` 和 `opacity`（GPU 加速）
- 禁止动画 `width`、`height`、`margin`、`padding`
- 禁止 `transition-all`，必须指定具体属性
- 尊重 `prefers-reduced-motion`

**Framer Motion 推荐配置**：
```tsx
// 标准弹簧
const spring = { type: "spring", stiffness: 300, damping: 25 }

// 快速响应
const snappy = { type: "spring", stiffness: 500, damping: 30 }

// 柔和
const gentle = { type: "spring", stiffness: 200, damping: 20 }
```

### 2.3 禁用状态动画

禁用元素**不应有交互动画**：
```tsx
whileHover={disabled ? undefined : { scale: 1.02 }}
whileTap={disabled ? undefined : { scale: 0.98 }}
```

---

## 3. 组件交互模式

### 3.1 按钮 (Button)

**必须**：
- 有 hover 反馈
- 有 press 反馈（缩放或下沉）
- 禁用时视觉明显不同
- 加载时显示 spinner 并禁用

**推荐**：
- 主要操作按钮有"厚度感"（底部阴影 + 点击下沉）
- 危险操作有确认步骤

### 3.2 卡牌 (Card)

**可选中卡牌**：
- Hover：轻微上浮 + 边框/光晕
- 选中：持续高亮 + 选中标记
- 禁用：灰度 + 降低透明度

**可拖拽卡牌**：
- 拖拽时：提升 z-index + 阴影增强
- 放置时：有落地动画
- 无效放置：回弹到原位

### 3.3 面板 (Panel)

**信息面板**：
- 半透明背景 + 模糊（可选）
- 不遮挡关键游戏区域

**模态面板**：
- 有遮罩层
- 支持点击遮罩关闭（可配置）
- 进入/退出有动画

### 3.4 资源指示器 (Resource Indicator)

**数值变化**：
- 增加：绿色闪烁 + 数字上浮
- 减少：红色闪烁 + 数字下沉
- 变化动画 200-400ms

---

## 4. 游戏特有交互

### 4.1 回合/阶段指示

- 当前阶段必须**视觉突出**
- 阶段切换有过渡动画
- 玩家回合有明确提示（颜色/动画/音效）

### 4.2 选择与确认

**单选**：点击即选中，再次点击取消
**多选**：点击切换选中状态
**确认操作**：选择后需要额外确认按钮

### 4.3 拖放交互

- 可放置区域有视觉提示
- 拖拽过程中显示预览
- 无效放置有反馈（抖动/回弹）

---

## 5. 无障碍要求

### 5.1 必须遵守

- 颜色对比度 ≥ 4.5:1（正文）
- 可交互元素最小 44x44px
- 键盘可导航（Tab 顺序合理）
- Focus 状态可见

### 5.2 推荐

- 重要信息不仅靠颜色区分
- 支持屏幕阅读器（aria-label）
- 动画可关闭

---

## 6. 风格引用

本规范不限定具体视觉风格。根据游戏类型选择合适的风格：

| 风格 | 适用场景 | 规范文件 |
|------|----------|----------|
| 街机立体 | 休闲、派对、骰子类 | `styles/arcade-3d.md` |
| 战术简洁 | 策略、卡牌对战 | `styles/tactical-clean.md` |
| 经典羊皮纸 | 复古、桌游模拟 | `styles/classic-parchment.md` |

游戏可以：
1. 直接引用某个风格
2. 基于风格做专属覆盖
3. 创建全新风格

---

## 7. 反模式 (Anti-Patterns)

| ❌ 禁止 | ✅ 应该 |
|--------|--------|
| 无 hover 反馈的可点击元素 | 所有可点击元素有 hover 变化 |
| 瞬间状态切换 | 使用 transition 过渡 |
| `transition-all` | 指定具体属性 |
| 动画 width/height | 动画 transform/opacity |
| 禁用元素仍有交互动画 | 禁用时移除动画 |
| 颜色是唯一状态区分 | 结合形状/图标/文字 |
| 无 cursor-pointer | 可点击元素加 cursor-pointer |

---

## 8. 快速检查清单

开发游戏 UI 时检查：

- [ ] 所有按钮有 hover + press 反馈
- [ ] 禁用状态视觉明显
- [ ] 动画只用 transform/opacity
- [ ] 动画时长在合理范围
- [ ] 当前回合/阶段清晰可见
- [ ] 可交互元素有 cursor-pointer
- [ ] 颜色对比度达标
- [ ] 支持键盘导航
